{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\nexport const useAuth = () => {\n  _s();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const navigate = useNavigate();\n  const checkAuth = async () => {\n    try {\n      await defaultAuthService.checkAuth();\n      return true;\n    } catch (error) {\n      localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n      return false;\n    }\n  };\n  const login = async authData => {\n    const data = await defaultAuthService.login(authData);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, data === null || data === void 0 ? void 0 : data.data.token);\n    setIsLoggedIn(true);\n  };\n  const register = async registerData => {\n    await defaultAuthService.register(registerData);\n  };\n  const resetPassword = async resetData => {\n    await defaultAuthService.resetPassword(resetData);\n  };\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    setIsLoggedIn(false);\n    navigate(ROUTER_KEYS.AUTH);\n  };\n  return {\n    isLoggedIn,\n    login,\n    register,\n    resetPassword,\n    logout,\n    checkAuth\n  };\n};\n_s(useAuth, \"KN3Kzl+xbVDEK6g7j5ANJnQKP3k=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["useState","useNavigate","ROUTER_KEYS","defaultAuthService","useAuth","_s","isLoggedIn","setIsLoggedIn","navigate","checkAuth","error","localStorage","removeItem","LOGIN_TOKEN_NAME","login","authData","data","console","log","setItem","token","register","registerData","resetPassword","resetData","logout","AUTH"],"sources":["/home/stas/Bootcamp/cgs-team-camp/packages/frontend/src/utils/useAuth.ts"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\n\nexport const useAuth = () => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const navigate = useNavigate();\n\n  const checkAuth = async () => {\n    try {\n      await defaultAuthService.checkAuth();\n      return true;\n    } catch (error) {\n      localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n      return false;\n    }\n  };\n\n  const login = async (authData: object) => {\n    const data = await defaultAuthService.login(authData);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, data?.data.token);\n    setIsLoggedIn(true);\n  };\n\n  const register = async (registerData: object) => {\n    await defaultAuthService.register(registerData);\n  };\n\n  const resetPassword = async (resetData: object) => {\n    await defaultAuthService.resetPassword(resetData);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    setIsLoggedIn(false);\n    navigate(ROUTER_KEYS.AUTH);\n  };\n\n  return { isLoggedIn, login, register, resetPassword, logout, checkAuth };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,yCAAyC;AACrE,SAASC,kBAAkB,QAAQ,uCAAuC;AAE1E,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMQ,QAAQ,GAAGP,WAAW,EAAE;EAE9B,MAAMQ,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACF,MAAMN,kBAAkB,CAACM,SAAS,EAAE;MACpC,OAAO,IAAI;IACb,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,YAAY,CAACC,UAAU,CAACV,WAAW,CAACW,gBAAgB,CAAC;MACrD,OAAO,KAAK;IACd;EACF,CAAC;EAED,MAAMC,KAAK,GAAG,MAAOC,QAAgB,IAAK;IACxC,MAAMC,IAAI,GAAG,MAAMb,kBAAkB,CAACW,KAAK,CAACC,QAAQ,CAAC;IACrDE,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjBL,YAAY,CAACQ,OAAO,CAACjB,WAAW,CAACW,gBAAgB,EAAEG,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,CAACI,KAAK,CAAC;IACpEb,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,MAAMc,QAAQ,GAAG,MAAOC,YAAoB,IAAK;IAC/C,MAAMnB,kBAAkB,CAACkB,QAAQ,CAACC,YAAY,CAAC;EACjD,CAAC;EAED,MAAMC,aAAa,GAAG,MAAOC,SAAiB,IAAK;IACjD,MAAMrB,kBAAkB,CAACoB,aAAa,CAACC,SAAS,CAAC;EACnD,CAAC;EAED,MAAMC,MAAM,GAAGA,CAAA,KAAM;IACnBd,YAAY,CAACC,UAAU,CAACV,WAAW,CAACW,gBAAgB,CAAC;IACrDN,aAAa,CAAC,KAAK,CAAC;IACpBC,QAAQ,CAACN,WAAW,CAACwB,IAAI,CAAC;EAC5B,CAAC;EAED,OAAO;IAAEpB,UAAU;IAAEQ,KAAK;IAAEO,QAAQ;IAAEE,aAAa;IAAEE,MAAM;IAAEhB;EAAU,CAAC;AAC1E,CAAC;AAACJ,EAAA,CApCWD,OAAO;EAAA,QAEDH,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}