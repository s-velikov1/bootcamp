{"ast":null,"code":"var _s2 = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useQuery } from 'react-query';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\nexport const useAuth = authData => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  useEffect(() => {\n    const token = localStorage.getItem('jwtToken');\n    if (token) {\n      setIsLoggedIn(true);\n    }\n  }, []);\n  const fetchLoginToken = async () => {\n    if (authData) {\n      return defaultAuthService.login(authData);\n    }\n  };\n  const login = token => {\n    _s();\n    const {\n      data\n    } = useQuery('authToken', fetchLoginToken);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, token);\n    setIsLoggedIn(true);\n  };\n  _s(login, \"JtionF1PqWN50DPWu724eJIU2SM=\", false, function () {\n    return [useQuery];\n  });\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    setIsLoggedIn(false);\n  };\n  return {\n    isLoggedIn,\n    login,\n    logout\n  };\n};\n_s2(useAuth, \"fKLMlyFH2GMrhNeUDpp+0z1yiCo=\");","map":{"version":3,"names":["useState","useEffect","useQuery","ROUTER_KEYS","defaultAuthService","useAuth","authData","_s2","_s","$RefreshSig$","isLoggedIn","setIsLoggedIn","token","localStorage","getItem","fetchLoginToken","login","data","console","log","setItem","LOGIN_TOKEN_NAME","logout","removeItem"],"sources":["/home/stas/Bootcamp/cgs-team-camp/packages/frontend/src/utils/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useQuery } from 'react-query';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\n\nexport const useAuth = (authData?: object) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem('jwtToken');\n    if (token) {\n      setIsLoggedIn(true);\n    }\n  }, []);\n\n  const fetchLoginToken = async () => {\n    if (authData) {\n      return defaultAuthService.login(authData);\n    }\n  };\n\n  const login = (token: string) => {\n    const { data } = useQuery('authToken', fetchLoginToken);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, token);\n    setIsLoggedIn(true);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    setIsLoggedIn(false);\n  };\n\n  return { isLoggedIn, login, logout };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,WAAW,QAAQ,yCAAyC;AACrE,SAASC,kBAAkB,QAAQ,uCAAuC;AAE1E,OAAO,MAAMC,OAAO,GAAIC,QAAiB,IAAK;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAC5C,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAEnDC,SAAS,CAAC,MAAM;IACd,MAAMW,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAC9C,IAAIF,KAAK,EAAE;MACTD,aAAa,CAAC,IAAI,CAAC;IACrB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMI,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAIT,QAAQ,EAAE;MACZ,OAAOF,kBAAkB,CAACY,KAAK,CAACV,QAAQ,CAAC;IAC3C;EACF,CAAC;EAED,MAAMU,KAAK,GAAIJ,KAAa,IAAK;IAAAJ,EAAA;IAC/B,MAAM;MAAES;IAAK,CAAC,GAAGf,QAAQ,CAAC,WAAW,EAAEa,eAAe,CAAC;IACvDG,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjBJ,YAAY,CAACO,OAAO,CAACjB,WAAW,CAACkB,gBAAgB,EAAET,KAAK,CAAC;IACzDD,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAACH,EAAA,CALIQ,KAAK;IAAA,QACQd,QAAQ;EAAA;EAM3B,MAAMoB,MAAM,GAAGA,CAAA,KAAM;IACnBT,YAAY,CAACU,UAAU,CAACpB,WAAW,CAACkB,gBAAgB,CAAC;IACrDV,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC;EAED,OAAO;IAAED,UAAU;IAAEM,KAAK;IAAEM;EAAO,CAAC;AACtC,CAAC;AAACf,GAAA,CA7BWF,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}