{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\n// import { useQuery } from 'react-query';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\nexport const useAuth = () => {\n  _s();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const checkAuth = async () => {\n    const data = await defaultAuthService.checkAuth();\n    console.log(data);\n    if (data.status === 200) {\n      return true;\n    }\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    return false;\n  };\n  useEffect(() => {\n    const token = localStorage.getItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    if (token) {\n      setIsLoggedIn(true);\n    }\n  }, []);\n  const login = async authData => {\n    const data = await defaultAuthService.login(authData);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, data === null || data === void 0 ? void 0 : data.data.token);\n    setIsLoggedIn(true);\n  };\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    setIsLoggedIn(false);\n  };\n  return {\n    isLoggedIn,\n    login,\n    logout,\n    checkAuth\n  };\n};\n_s(useAuth, \"fKLMlyFH2GMrhNeUDpp+0z1yiCo=\");","map":{"version":3,"names":["useState","useEffect","ROUTER_KEYS","defaultAuthService","useAuth","_s","isLoggedIn","setIsLoggedIn","checkAuth","data","console","log","status","localStorage","removeItem","LOGIN_TOKEN_NAME","token","getItem","login","authData","setItem","logout"],"sources":["/home/stas/Bootcamp/cgs-team-camp/packages/frontend/src/utils/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n// import { useQuery } from 'react-query';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\n\nexport const useAuth = () => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const checkAuth = async () => {\n    const data = await defaultAuthService.checkAuth();\n    console.log(data);\n\n    if (data.status === 200) {\n      return true;\n    }\n\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n\n    return false;\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    if (token) {\n      setIsLoggedIn(true);\n    }\n  }, []);\n\n  const login = async (authData: object) => {\n    const data = await defaultAuthService.login(authData);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, data?.data.token);\n    setIsLoggedIn(true);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    setIsLoggedIn(false);\n  };\n\n\n  return { isLoggedIn, login, logout, checkAuth };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C;AACA,SAASC,WAAW,QAAQ,yCAAyC;AACrE,SAASC,kBAAkB,QAAQ,uCAAuC;AAE1E,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMQ,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,MAAMC,IAAI,GAAG,MAAMN,kBAAkB,CAACK,SAAS,EAAE;IACjDE,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IAEjB,IAAIA,IAAI,CAACG,MAAM,KAAK,GAAG,EAAE;MACvB,OAAO,IAAI;IACb;IAEAC,YAAY,CAACC,UAAU,CAACZ,WAAW,CAACa,gBAAgB,CAAC;IAErD,OAAO,KAAK;EACd,CAAC;EAEDd,SAAS,CAAC,MAAM;IACd,MAAMe,KAAK,GAAGH,YAAY,CAACI,OAAO,CAACf,WAAW,CAACa,gBAAgB,CAAC;IAChE,IAAIC,KAAK,EAAE;MACTT,aAAa,CAAC,IAAI,CAAC;IACrB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMW,KAAK,GAAG,MAAOC,QAAgB,IAAK;IACxC,MAAMV,IAAI,GAAG,MAAMN,kBAAkB,CAACe,KAAK,CAACC,QAAQ,CAAC;IACrDT,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjBI,YAAY,CAACO,OAAO,CAAClB,WAAW,CAACa,gBAAgB,EAAEN,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,CAACO,KAAK,CAAC;IACpET,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,MAAMc,MAAM,GAAGA,CAAA,KAAM;IACnBR,YAAY,CAACC,UAAU,CAACZ,WAAW,CAACa,gBAAgB,CAAC;IACrDR,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC;EAGD,OAAO;IAAED,UAAU;IAAEY,KAAK;IAAEG,MAAM;IAAEb;EAAU,CAAC;AACjD,CAAC;AAACH,EAAA,CApCWD,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}