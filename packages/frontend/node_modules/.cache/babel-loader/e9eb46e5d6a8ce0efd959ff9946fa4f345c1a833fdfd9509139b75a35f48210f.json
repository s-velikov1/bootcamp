{"ast":null,"code":"var _s2 = $RefreshSig$();\nimport { useEffect } from 'react';\n// import { useQuery } from 'react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { useQuery } from 'react-query';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\nexport const useAuth = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  // const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const navigate = useNavigate();\n  const checkAuth = async () => {\n    _s();\n    // const data = await defaultAuthService.checkAuth();\n    const data = useQuery('auth', defaultAuthService.checkAuth);\n    console.log(data);\n\n    // if (data && data.status !== 200) {\n    //   localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    //   navigate(ROUTER_KEYS.LOGIN);\n    // }\n  };\n  _s(checkAuth, \"s5pXKY/D2uxDKB8G+Zz1KjP19Ng=\", false, function () {\n    return [useQuery];\n  });\n  useEffect(() => {\n    checkAuth();\n  }, []);\n  const login = async authData => {\n    const data = await defaultAuthService.login(authData);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, data === null || data === void 0 ? void 0 : data.data.token);\n    // setIsLoggedIn(true);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    navigate(ROUTER_KEYS.LOGIN);\n    // setIsLoggedIn(false);\n  };\n\n  return {\n    login,\n    logout,\n    checkAuth\n  };\n};\n_s2(useAuth, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["useEffect","useNavigate","useQuery","ROUTER_KEYS","defaultAuthService","useAuth","_s2","_s","$RefreshSig$","navigate","checkAuth","data","console","log","login","authData","localStorage","setItem","LOGIN_TOKEN_NAME","token","logout","removeItem","LOGIN"],"sources":["/home/stas/Bootcamp/cgs-team-camp/packages/frontend/src/utils/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n// import { useQuery } from 'react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { useQuery } from 'react-query';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\n\nexport const useAuth = () => {\n  // const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const navigate = useNavigate();\n  const checkAuth = async () => {\n    // const data = await defaultAuthService.checkAuth();\n    const data = useQuery('auth', defaultAuthService.checkAuth);\n    console.log(data);\n\n    // if (data && data.status !== 200) {\n    //   localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    //   navigate(ROUTER_KEYS.LOGIN);\n    // }\n  };\n\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  const login = async (authData: object) => {\n    const data = await defaultAuthService.login(authData);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, data?.data.token);\n    // setIsLoggedIn(true);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    navigate(ROUTER_KEYS.LOGIN);\n    // setIsLoggedIn(false);\n  };\n\n  return { login, logout, checkAuth };\n};\n"],"mappings":";AAAA,SAAmBA,SAAS,QAAQ,OAAO;AAC3C;AACA,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,WAAW,QAAQ,yCAAyC;AACrE,SAASC,kBAAkB,QAAQ,uCAAuC;AAE1E,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAC3B;EACA,MAAMC,QAAQ,GAAGR,WAAW,EAAE;EAC9B,MAAMS,SAAS,GAAG,MAAAA,CAAA,KAAY;IAAAH,EAAA;IAC5B;IACA,MAAMI,IAAI,GAAGT,QAAQ,CAAC,MAAM,EAAEE,kBAAkB,CAACM,SAAS,CAAC;IAC3DE,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;;IAEjB;IACA;IACA;IACA;EACF,CAAC;EAACJ,EAAA,CATIG,SAAS;IAAA,QAEAR,QAAQ;EAAA;EASvBF,SAAS,CAAC,MAAM;IACdU,SAAS,EAAE;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMI,KAAK,GAAG,MAAOC,QAAgB,IAAK;IACxC,MAAMJ,IAAI,GAAG,MAAMP,kBAAkB,CAACU,KAAK,CAACC,QAAQ,CAAC;IACrDH,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjBK,YAAY,CAACC,OAAO,CAACd,WAAW,CAACe,gBAAgB,EAAEP,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,CAACQ,KAAK,CAAC;IACpE;EACF,CAAC;;EAED,MAAMC,MAAM,GAAGA,CAAA,KAAM;IACnBJ,YAAY,CAACK,UAAU,CAAClB,WAAW,CAACe,gBAAgB,CAAC;IACrDT,QAAQ,CAACN,WAAW,CAACmB,KAAK,CAAC;IAC3B;EACF,CAAC;;EAED,OAAO;IAAER,KAAK;IAAEM,MAAM;IAAEV;EAAU,CAAC;AACrC,CAAC;AAACJ,GAAA,CAhCWD,OAAO;EAAA,QAEDJ,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}