{"ast":null,"code":"var _s = $RefreshSig$();\n// import { useState, useEffect } from 'react';\n// import { useQuery } from 'react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\nexport const useAuth = () => {\n  _s();\n  // const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const navigate = useNavigate();\n  const checkAuth = async () => {\n    const data = await defaultAuthService.checkAuth();\n    console.log(data);\n    if (data.status !== 200) {\n      localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n      navigate(ROUTER_KEYS.LOGIN);\n    }\n  };\n\n  // useEffect(() => {\n  //   const token = localStorage.getItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n  //   if (token) {\n  //     setIsLoggedIn(true);\n  //   }\n  // }, []);\n\n  const login = async authData => {\n    const data = await defaultAuthService.login(authData);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, data === null || data === void 0 ? void 0 : data.data.token);\n    // setIsLoggedIn(true);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    navigate(ROUTER_KEYS.LOGIN);\n    // setIsLoggedIn(false);\n  };\n\n  return {\n    login,\n    logout,\n    checkAuth\n  };\n};\n_s(useAuth, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["useNavigate","ROUTER_KEYS","defaultAuthService","useAuth","_s","navigate","checkAuth","data","console","log","status","localStorage","removeItem","LOGIN_TOKEN_NAME","LOGIN","login","authData","setItem","token","logout"],"sources":["/home/stas/Bootcamp/cgs-team-camp/packages/frontend/src/utils/useAuth.ts"],"sourcesContent":["// import { useState, useEffect } from 'react';\n// import { useQuery } from 'react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { ROUTER_KEYS } from '../modules/common/consts/app-keys.const';\nimport { defaultAuthService } from '../modules/auth/services/auth.service';\n\nexport const useAuth = () => {\n  // const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const navigate = useNavigate();\n  const checkAuth = async () => {\n    const data = await defaultAuthService.checkAuth();\n    console.log(data);\n\n    if (data.status !== 200) {\n      localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n      navigate(ROUTER_KEYS.LOGIN);\n    }\n  };\n\n  // useEffect(() => {\n  //   const token = localStorage.getItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n  //   if (token) {\n  //     setIsLoggedIn(true);\n  //   }\n  // }, []);\n\n  const login = async (authData: object) => {\n    const data = await defaultAuthService.login(authData);\n    console.log(data);\n    localStorage.setItem(ROUTER_KEYS.LOGIN_TOKEN_NAME, data?.data.token);\n    // setIsLoggedIn(true);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(ROUTER_KEYS.LOGIN_TOKEN_NAME);\n    navigate(ROUTER_KEYS.LOGIN);\n    // setIsLoggedIn(false);\n  };\n\n  return { login, logout, checkAuth };\n};\n"],"mappings":";AAAA;AACA;AACA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,yCAAyC;AACrE,SAASC,kBAAkB,QAAQ,uCAAuC;AAE1E,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B;EACA,MAAMC,QAAQ,GAAGL,WAAW,EAAE;EAC9B,MAAMM,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,MAAMC,IAAI,GAAG,MAAML,kBAAkB,CAACI,SAAS,EAAE;IACjDE,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IAEjB,IAAIA,IAAI,CAACG,MAAM,KAAK,GAAG,EAAE;MACvBC,YAAY,CAACC,UAAU,CAACX,WAAW,CAACY,gBAAgB,CAAC;MACrDR,QAAQ,CAACJ,WAAW,CAACa,KAAK,CAAC;IAC7B;EACF,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMC,KAAK,GAAG,MAAOC,QAAgB,IAAK;IACxC,MAAMT,IAAI,GAAG,MAAML,kBAAkB,CAACa,KAAK,CAACC,QAAQ,CAAC;IACrDR,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjBI,YAAY,CAACM,OAAO,CAAChB,WAAW,CAACY,gBAAgB,EAAEN,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEA,IAAI,CAACW,KAAK,CAAC;IACpE;EACF,CAAC;;EAED,MAAMC,MAAM,GAAGA,CAAA,KAAM;IACnBR,YAAY,CAACC,UAAU,CAACX,WAAW,CAACY,gBAAgB,CAAC;IACrDR,QAAQ,CAACJ,WAAW,CAACa,KAAK,CAAC;IAC3B;EACF,CAAC;;EAED,OAAO;IAAEC,KAAK;IAAEI,MAAM;IAAEb;EAAU,CAAC;AACrC,CAAC;AAACF,EAAA,CAlCWD,OAAO;EAAA,QAEDH,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}